"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}(),SlideManager=function(){function t(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,t),i?e.callback?(this.el=i,this.changing=!1,this.index=0,this.max=e.length||this.el.children.length,this.options={loop:e.loop||!1,random:e.random||!1,vertical:e.vertical||!1,callback:e.callback,auto:e.auto||!1,interval:e.interval||5,hammer:!0},e.hammer===!1&&(this.options.hammer=!1),this.hammer=null,this.onSwipe=this.onSwipe.bind(this),this.counter=0,void(this.raf=null)):void console.error("You must give a callback"):void console.error("You must pass an element")}return _createClass(t,[{key:"init",value:function(){return 0!==this.max?(this.options.hammer&&(this.hammer=new Hammer.Manager(this.el),this.hammer.add(new Hammer.Swipe({direction:this.options.vertical?Hammer.DIRECTION_VERTICAL:Hammer.DIRECTION_HORIZONTAL})),this.hammer.on("swipe",this.onSwipe)),this.options.auto&&this.startAuto(),this):void 0}},{key:"destroy",value:function(){return 0!==this.max?(this.options.hammer&&(this.hammer.off("swipe",this.onSwipe),this.hammer.destroy(),this.hammer=null),this.changing=!1,cancelAnimationFrame(this.raf),this.raf=null,this.counter=0,this):void 0}},{key:"getIndex",value:function(){return this.index}},{key:"goTo",value:function(t){if(t!=this.index&&!this.isChanging()){var i=this.checkLoop(t),e=this.createEvent(i);if(i==this.index)return void(this.changing=!1);this.index=i,this.options.callback(e)}}},{key:"done",value:function(){this.changing=!1}},{key:"startAuto",value:function(){this.counter++,this.counter>=60*this.options.interval&&(this.callback(-1),this.counter=0),this.raf=requestAnimationFrame(this.startAuto.bind(this))}},{key:"isChanging",value:function(){return this.changing?!0:(this.changing=!0,!1)}},{key:"onSwipe",value:function(t){this.callback(this.options.vertical?t.deltaY:t.deltaX)}},{key:"newIndex",value:function(t){return this.checkLoop(t>0?this.index-1:this.index+1)}},{key:"newRandomIndex",value:function(){var t=void 0;do t=Math.floor(Math.random()*this.max);while(t==this.index);return t}},{key:"checkLoop",value:function(t){return 0>t?this.options.loop?this.max-1:0:t>this.max-1?this.options.loop?0:this.max-1:t}},{key:"createEvent",value:function(t){var i=t>this.index?1:-1;return 0==this.index&&t==this.max?i=-1:this.index==this.max&&0==t&&(i=1),{current:t,previous:this.index,direction:i}}},{key:"callback",value:function(t){if(!this.isChanging()){var i=this.options.random?this.newRandomIndex():this.newIndex(t),e=this.createEvent(i);if(i==this.index)return void(this.changing=!1);this.index=i,this.options.callback(e)}}}]),t}();exports["default"]=SlideManager;